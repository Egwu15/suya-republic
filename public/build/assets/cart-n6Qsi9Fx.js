import{r as l,j as e,q as T,y as p,a as F}from"./app-zBeRryV1.js";import{N as I}from"./index-C2__p1WT.js";import{F as E}from"./index-VFHe-l0t.js";import{L as O}from"./Loader-CzavdRWn.js";import{u as r}from"./Store-DvD1EEPr.js";import{Q as L}from"./react-toastify.esm-C5Cif9zO.js";/* empty css                      */import{C as P}from"./constant-DoBAxWEL.js";import"./index-CrmwEokY.js";import"./index-BEUZbosG.js";import"./Mobile-Logo-DjYHHJYk.js";import"./CartIcon-Bklb5g16.js";const M=({show:i,product:s,onClose:a})=>(r(),l.useEffect(()=>{window.scrollTo(0,0)},[]),e.jsx("div",{className:"modal fade show",tabIndex:"-1",style:{display:i?"block":"none",background:"rgba(0, 0, 0, 0.5)"},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:s==null?void 0:s.name}),e.jsx("button",{type:"button",className:"btn-close",onClick:a})]}),e.jsx("div",{className:"modal-body",children:e.jsx("section",{className:"product",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"row row-grid",children:[e.jsx("div",{className:"col-md-12 card-container-img cursor-pointer",style:{height:"200px",objectFit:"contain"},children:e.jsx("img",{src:"/storage/"+(s==null?void 0:s.product_image),alt:s==null?void 0:s.name,loading:"lazy",style:{width:"100%",height:"100%"}})}),e.jsxs("div",{className:"col-md-12 right-card",children:[e.jsx("h2",{className:"mt-3",children:s==null?void 0:s.name}),e.jsx("h5",{style:{color:"#ff0000"},children:e.jsxs("b",{children:["Â£",s==null?void 0:s.price]})}),e.jsx("p",{style:{color:"#333333",marginBottom:"20px"},children:s==null?void 0:s.description})]}),e.jsx("div",{children:e.jsx("button",{onClick:()=>a(),style:{background:P,color:"white",fontWeight:"600",fontSize:"14px",lineHeight:"14px",border:"none",padding:"10px 15px",cursor:"pointer",width:"170px",marginInline:"10px",borderRadius:"5px"},children:"Close"})})]})})})})]})})})),Z=({cartAdded:i,products:s})=>{const{cartItems:a,addItem:R,removeItem:N,updateItemQuantity:f,updateItemSpice:_,calculateTotal:c}=r(),[g,D]=l.useState(!1),[o,m]=l.useState(null),[Q,u]=l.useState(!1),[h,x]=l.useState(!1),[v,w]=l.useState(""),y=n=>{m(n),x(!0)},k=()=>{x(!1),m(null)},[q,C]=l.useState({});T().props.auth.user,l.useEffect(()=>{window.scrollTo(0,0)},[]),l.useEffect(()=>{const n=localStorage.getItem("orderType");w(n)},[]),l.useEffect(()=>{if(!i&&(s!=null&&s.length)){const n=s.map(t=>t.id);p.post("/cart",{product_ids:n})}},[s,i]);const j=(n,t)=>{f(n,t)},S=n=>{N(n)};l.useEffect(()=>{const n=a.reduce((t,d)=>(d.spice&&(t[d.id]=d.spice),t),{});C(n)},[a]);const b=()=>{r.getState(),v==="collect"?p.visit("/checkout"):u(!0)};return e.jsxs("div",{children:[g?e.jsx(O,{}):e.jsxs(e.Fragment,{children:[e.jsx(I,{}),e.jsx("section",{className:"hero-bg d-flex align-items-center ",style:{height:"400px"},children:e.jsx("div",{className:"container  text-center",children:e.jsx(F,{href:"/menu",className:"text-decoration-none",children:e.jsxs("button",{className:"small-btn",children:[e.jsx("span",{className:"material-symbols-outlined ",children:"arrow_back"}),"Back"]})})})}),e.jsx("section",{className:"menu-section position-relative",children:e.jsxs("div",{className:"x min-vh-100 p-3",children:[" ",e.jsx("div",{className:"container",children:e.jsx("div",{className:"card mx-auto",children:e.jsxs("div",{className:"container white-bg py-5",children:[e.jsx(L,{})," ",e.jsxs("div",{className:"row g-4",children:[e.jsxs("div",{className:"col-lg-8",children:[e.jsx("h4",{className:"mb-3",children:"Cart Total"}),e.jsxs("p",{className:"mb-4",children:["You have ",a.length," ","item(s) in your cart"]}),a.map(n=>e.jsx("div",{className:"card p-3 mb-3 shadow-sm",children:e.jsxs("div",{className:"d-flex align-items-center gap-3",children:[e.jsx("img",{src:`/storage/${n.product_image}`,alt:n.name,className:"rounded",style:{height:"70px",width:"70px",objectFit:"cover",cursor:"pointer"},onClick:()=>y(n)}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("h6",{className:"mb-1",children:n.name}),e.jsxs("p",{className:"mb-1",children:["Â£",n.price.toFixed(2)]})]}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("button",{className:"btn btn-outline-dark btn-sm",onClick:()=>j(n.id,-1),children:"â€“"}),e.jsx("span",{children:n.quantity}),e.jsx("button",{className:"btn btn-outline-dark btn-sm",onClick:()=>j(n.id,1),children:"+"}),e.jsx("button",{className:"btn btn-outline-danger btn-sm",onClick:()=>S(n.id),children:"ðŸ—‘"})]})]})},n.id)),e.jsx("div",{className:"col-lg-4 d-block d-md-none",children:e.jsxs("div",{className:"card shadow-sm p-4",children:[e.jsx("h5",{className:"fw-bold mb-3",children:"Order Summary"}),e.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[e.jsx("span",{children:"Order"}),e.jsxs("span",{children:[a.length,"pcs"]})]}),e.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["Â£",Number((c()||0)-2).toFixed(2)]})]}),e.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[e.jsx("span",{children:"Tax"}),e.jsx("span",{children:"Â£2.00"})]}),e.jsxs("div",{className:"d-flex justify-content-between fw-bold border-top pt-2 mt-2",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["Â£",Number(c()||0).toFixed(2)]})]}),e.jsx("button",{onClick:b,className:"btn btn-danger text-white w-100 mt-4",style:{textDecoration:"none"},disabled:!a.length,children:"Proceed to Checkout"})]})})]}),e.jsx("div",{className:"col-lg-4 d-none d-md-block",children:e.jsxs("div",{className:"card shadow-sm p-4",children:[e.jsx("h5",{className:"fw-bold mb-3",children:"Order Summary"}),e.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[e.jsx("span",{children:"Order"}),e.jsxs("span",{children:[a.length,"pcs"]})]}),e.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["Â£",Number((c()||0)-2).toFixed(2)]})]}),e.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[e.jsx("span",{children:"Tax"}),e.jsx("span",{children:"Â£2.00"})]}),e.jsxs("div",{className:"d-flex justify-content-between fw-bold border-top pt-2 mt-2",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["Â£",Number(c()||0).toFixed(2)]})]}),e.jsx("button",{onClick:b,className:"btn btn-danger text-white w-100 mt-4",style:{textDecoration:"none"},disabled:!a.length,children:"Proceed to Checkout"})]})})]}),h&&o&&e.jsx(M,{show:h,product:o,onClose:k})]})})})]})})]}),e.jsx(E,{})]})};export{Z as default};
