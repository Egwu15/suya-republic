import{r as n,j as e,q as P,y as N}from"./app-Ci-iwg3S.js";import{C as _,N as F,F as V}from"./index-DjXr2uLk.js";import{L as Q}from"./Loader-DWZoM99y.js";import{u as o}from"./Store-2qyr2ZpA.js";import{Q as g}from"./react-toastify.esm-Ct26NFGc.js";/* empty css                      */import{i as U}from"./Roast-suya-5esSPXFc.js";import"./Mobile-Logo-DjYHHJYk.js";import"./CartIcon-lHsSOW7t.js";/* empty css              */const q=({show:i,product:l,onClose:c})=>(o(),n.useEffect(()=>{window.scrollTo(0,0)},[]),e.jsx("div",{className:"modal fade show",tabIndex:"-1",style:{display:i?"block":"none",background:"rgba(0, 0, 0, 0.5)"},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:l==null?void 0:l.name}),e.jsx("button",{type:"button",className:"btn-close",onClick:c})]}),e.jsx("div",{className:"modal-body",children:e.jsx("section",{className:"product",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"row row-grid",children:[e.jsx("div",{className:"col-md-12 card-container-img cursor-pointer",style:{height:"200px",objectFit:"contain"},children:e.jsx("img",{src:U,alt:l==null?void 0:l.name,loading:"lazy",style:{width:"100%",height:"100%"}})}),e.jsxs("div",{className:"col-md-12 right-card",children:[e.jsx("h2",{className:"mt-3",children:l==null?void 0:l.name}),e.jsx("h5",{style:{color:"#ff0000"},children:e.jsxs("b",{children:["£",l==null?void 0:l.price]})}),e.jsx("p",{style:{color:"#333333",marginBottom:"20px"},children:l==null?void 0:l.description})]}),e.jsx("div",{children:e.jsx("button",{onClick:()=>c(),style:{background:_,color:"white",fontWeight:"600",fontSize:"14px",lineHeight:"14px",border:"none",padding:"10px 15px",cursor:"pointer",width:"170px",marginInline:"10px",borderRadius:"5px"},children:"Close"})})]})})})})]})})})),le=({cartAdded:i,products:l})=>{const{cartItems:c,addItem:W,removeItem:f,updateItemQuantity:v,updateItemSpice:z,calculateTotal:C}=o(),[y,B]=n.useState(!1),[r,d]=n.useState(null),[k,h]=n.useState(!1),[m,x]=n.useState(!1),[w,T]=n.useState(""),S=s=>{d(s),x(!0)},I=()=>{x(!1),d(null)},[E,j]=n.useState({});P().props.auth.user,n.useEffect(()=>{window.scrollTo(0,0)},[]),n.useEffect(()=>{const s=localStorage.getItem("orderType");T(s)},[]),n.useEffect(()=>{if(!i&&(l!=null&&l.length)){const s=l.map(a=>a.id);N.post("/cart",{product_ids:s})}},[l,i]);const b=(s,a)=>{v(s,a)},L=s=>{f(s)},O=(s,a)=>{j(t=>({...t,[s]:a}))};n.useEffect(()=>{const s=c.reduce((a,t)=>(t.spice&&(a[t.id]=t.spice),a),{});j(s)},[c]);const R=()=>{o.getState(),w==="collect"?N.visit("/checkout"):h(!0)},A=()=>{window.location.href="https://deliveroo.co.uk/menu/manchester/hulme-park/suya-republick-and-grill?utm_campaign=organic&utm_medium=referrer&utm_source=menu_share"},D=()=>{window.location.href="/checkout"},p=()=>{h(!1)};return e.jsxs("div",{children:[e.jsx(F,{}),y?e.jsx(Q,{}):e.jsxs(e.Fragment,{children:[" ",e.jsx(g,{}),e.jsx("section",{className:"our-menu",children:e.jsx("div",{className:"container-fluid text-center",children:e.jsx("h1",{className:"mb-2",children:"CART"})})}),e.jsx("section",{className:"cart-table container-fluid mt-5",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"PRODUCT"}),e.jsx("th",{scope:"col",children:"VARIANCE"}),e.jsx("th",{scope:"col",children:"PRICE"}),e.jsx("th",{scope:"col",children:"QUANTITY"}),e.jsx("th",{scope:"col",children:"SUBTOTAL"})]})}),e.jsx("tbody",{children:c.length?c.map(s=>{var a;return e.jsxs("tr",{className:"",children:[e.jsx("td",{children:e.jsxs("span",{className:"d-flex align-items-center cursor-pointer",style:{color:"#b7903c",textDecoration:"none"},children:[e.jsx("img",{src:"/storage/"+s.product_image,onClick:()=>S(s),alt:s.name,style:{height:"80px",width:"80px",marginRight:"10px",objectFit:"cover",cursor:"pointer"}}),e.jsx("span",{className:"text-dark",children:s.name})]})}),e.jsx("td",{children:s.variance?e.jsx("select",{value:((a=E[s.id])==null?void 0:a.id)||"",onChange:t=>{const u=s.variance.options.find(M=>M.id===parseInt(t.target.value));console.log("Selected Option:",u),O(s.id,u)},className:"form-select w-75",children:s.variance.options.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))}):"No variance available"}),e.jsxs("td",{children:["£",s.price??"invalid price"]}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("button",{className:"btn btn-light",onClick:()=>b(s.id,-1),children:"-"}),e.jsx("span",{className:"mx-3",style:{fontWeight:"bold"},children:s.quantity}),e.jsx("button",{className:"btn btn-light",onClick:()=>b(s.id,1),children:"+"})]})}),e.jsxs("td",{children:["£",(s.quantity*s.price).toFixed(2),e.jsx("span",{className:"text-danger mx-3",style:{cursor:"pointer",fontWeight:"bold"},onClick:()=>L(s.id),children:"X"})]})]},s.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"text-center",children:"No Items Selected"})})})]})})}),e.jsxs("section",{className:"cart-totals p-4",children:[e.jsx("h1",{className:"mt-3 mb-5",children:"CART TOTALS"}),e.jsxs("div",{className:"row align-items-center mb-3",children:[e.jsx("h6",{className:"col-md-3",children:"TOTAL"}),e.jsx("p",{className:"col-md-9",children:e.jsxs("b",{children:["£",C()]})})]}),e.jsx("hr",{}),e.jsx("div",{className:"d-flex justify-content-center gap-3",children:e.jsx("button",{onClick:R,className:"btn btn-danger text-white",style:{textDecoration:"none"},disabled:!c.length,children:"PROCEED TO CHECKOUT"})}),k&&e.jsxs("div",{className:"modal fade show",tabIndex:"-1",style:{display:"block",background:"rgba(0, 0, 0, 0.5)"},children:[" ",e.jsx(g,{}),e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Cart Action"}),e.jsx("button",{type:"button",className:"btn-close",onClick:p})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("form",{children:[e.jsx("button",{type:"button",className:"btn btn-dark w-100 mb-2",onClick:D,children:"I’LL COLLECT"}),e.jsx("button",{type:"button",className:"btn btn-dark w-100",onClick:A,children:"DELIVER TO ME"})]})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"button",className:"btn btn-dark",onClick:p,children:"Close"})})]})})]}),m&&r&&e.jsx(q,{show:m,product:r,onClose:I})]})]}),e.jsx(V,{})]})};export{le as default};
