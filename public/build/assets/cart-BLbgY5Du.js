import{r as a,j as e,q as T,y as N}from"./app-S1jEkIOW.js";import{N as I}from"./index-CZmPzWTz.js";import{F}from"./index-aQcVBlbQ.js";/* empty css             */import{L as E}from"./Loader-C9xbTFfc.js";import{u as r}from"./Store-DC_1sLjL.js";import{Q as O}from"./react-toastify.esm-tkn2HM1H.js";/* empty css                      */import{C as L}from"./constant-DoBAxWEL.js";import"./index-DzDLaIkh.js";import"./index-DaUbZAAV.js";import"./Mobile-Logo-DjYHHJYk.js";import"./CartIcon-6RftGwXu.js";const P=({show:i,product:n,onClose:l})=>(r(),a.useEffect(()=>{window.scrollTo(0,0)},[]),e.jsx("div",{className:"modal fade show",tabIndex:"-1",style:{display:i?"block":"none",background:"rgba(0, 0, 0, 0.5)"},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:n==null?void 0:n.name}),e.jsx("button",{type:"button",className:"btn-close",onClick:l})]}),e.jsx("div",{className:"modal-body",children:e.jsx("section",{className:"product",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"row row-grid",children:[e.jsx("div",{className:"col-md-12 card-container-img cursor-pointer",style:{height:"200px",objectFit:"contain"},children:e.jsx("img",{src:"/storage/"+(n==null?void 0:n.product_image),alt:n==null?void 0:n.name,loading:"lazy",style:{width:"100%",height:"100%"}})}),e.jsxs("div",{className:"col-md-12 right-card",children:[e.jsx("h2",{className:"mt-3",children:n==null?void 0:n.name}),e.jsx("h5",{style:{color:"#ff0000"},children:e.jsxs("b",{children:["Â£",n==null?void 0:n.price]})}),e.jsx("p",{style:{color:"#333333",marginBottom:"20px"},children:n==null?void 0:n.description})]}),e.jsx("div",{children:e.jsx("button",{onClick:()=>l(),style:{background:L,color:"white",fontWeight:"600",fontSize:"14px",lineHeight:"14px",border:"none",padding:"10px 15px",cursor:"pointer",width:"170px",marginInline:"10px",borderRadius:"5px"},children:"Close"})})]})})})})]})})})),Z=({cartAdded:i,products:n})=>{const{cartItems:l,addItem:M,removeItem:f,updateItemQuantity:g,updateItemSpice:R,calculateTotal:c}=r(),[u,_]=a.useState(!1),[o,m]=a.useState(null),[D,v]=a.useState(!1),[h,x]=a.useState(!1),[j,w]=a.useState(""),y=s=>{m(s),x(!0)},k=()=>{x(!1),m(null)},[Q,C]=a.useState({});T().props.auth.user,a.useEffect(()=>{window.scrollTo(0,0)},[]),a.useEffect(()=>{const s=localStorage.getItem("orderType");w(s||"collect")},[]),a.useEffect(()=>{if(!i&&(n!=null&&n.length)){const s=n.map(t=>t.id);N.post("/cart",{product_ids:s})}},[n,i]);const b=(s,t)=>{g(s,t)},S=s=>{f(s)};a.useEffect(()=>{const s=l.reduce((t,d)=>(d.spice&&(t[d.id]=d.spice),t),{});C(s)},[l]);const p=()=>{r.getState(),console.log(j),j==="collect"?N.visit("/checkout"):v(!0)};return e.jsxs("div",{children:[u?e.jsx(E,{}):e.jsxs(e.Fragment,{children:[e.jsx(I,{}),e.jsx("section",{className:"hero-bg d-flex align-items-center ",style:{height:"400px"},children:e.jsx("div",{className:"container  text-center"})}),e.jsx("section",{className:"menu-section position-relative",children:e.jsxs("div",{className:"x p-3",children:[" ",e.jsx("div",{className:"container",children:e.jsx("div",{className:"card mx-auto",children:e.jsxs("div",{className:"container white-bg py-5",children:[e.jsx(O,{})," ",e.jsxs("div",{className:"row g-4",children:[e.jsxs("div",{className:"col-lg-8",children:[e.jsx("h4",{className:"mb-3",children:"Cart Total"}),e.jsxs("p",{className:"mb-4",children:["You have ",l.length," ","item(s) in your cart"]}),l.map(s=>e.jsx("div",{className:"card p-3 mb-3 shadow-sm",children:e.jsxs("div",{className:"d-flex align-items-center gap-3",children:[e.jsx("img",{src:`/storage/${s.product_image}`,alt:s.name,className:"rounded",style:{height:"70px",width:"70px",objectFit:"cover",cursor:"pointer"},onClick:()=>y(s)}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("h6",{className:"mb-1",children:s==null?void 0:s.name}),e.jsxs("p",{className:"mb-1",children:["Â£",(s==null?void 0:s.price)??""]})]}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("button",{className:"btn btn-outline-dark btn-sm",onClick:()=>b(s.id,-1),children:"â€“"}),e.jsx("span",{children:s.quantity}),e.jsx("button",{className:"btn btn-outline-dark btn-sm",onClick:()=>b(s.id,1),children:"+"}),e.jsx("button",{className:"btn btn-outline-danger btn-sm",onClick:()=>S(s.id),children:"ðŸ—‘"})]})]})},s.id)),e.jsx("div",{className:"col-lg-4 d-block d-md-none",children:e.jsxs("div",{className:"card shadow-sm p-4",children:[e.jsx("h5",{className:"fw-bold mb-3",children:"Order Summary"}),e.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[e.jsx("span",{children:"Order"}),e.jsxs("span",{children:[l.length,"pcs"]})]}),e.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["Â£",Number(c()||0).toFixed(2)]})]}),e.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[e.jsx("span",{children:"Tax"}),e.jsx("span",{children:"Â£2.00"})]}),e.jsxs("div",{className:"d-flex justify-content-between fw-bold border-top pt-2 mt-2",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["Â£",Number(c()||0).toFixed(2)]})]}),e.jsx("button",{onClick:p,className:"btn btn-danger text-white w-100 mt-4",style:{textDecoration:"none"},disabled:!l.length,children:"Proceed to Checkout"})]})})]}),e.jsx("div",{className:"col-lg-4 d-none d-md-block",children:e.jsxs("div",{className:"card shadow-sm p-4",children:[e.jsx("h5",{className:"fw-bold mb-3",children:"Order Summary"}),e.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[e.jsx("span",{children:"Order"}),e.jsxs("span",{children:[l.length,"pcs"]})]}),e.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["Â£",Number(c()||0).toFixed(2)]})]}),e.jsxs("div",{className:"d-flex justify-content-between fw-bold border-top pt-2 mt-2",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["Â£",Number(c()||0).toFixed(2)]})]}),e.jsx("button",{onClick:p,className:"btn btn-danger text-white w-100 mt-4",style:{textDecoration:"none"},disabled:!l.length,children:"Proceed to Checkout"})]})})]}),h&&o&&e.jsx(P,{show:h,product:o,onClose:k})]})})})]})})]}),e.jsx(F,{})]})};export{Z as default};
